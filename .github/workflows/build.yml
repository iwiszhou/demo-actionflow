on:
  push:
    branches:
      - uat

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: 🏗 Setup repo
        uses: actions/checkout@v3

      - name: Check if the version in app.json has changed
        id: check_version
        run: |
          # Check if the app.json file was changed in the push
          if git diff HEAD^ HEAD -- app.json | grep '"version"'; then
            echo "The version field in app.json has been modified."
            VERSION_CHANGED=true
          else
            echo "app.json file has NOT been changed."
            VERSION_CHANGED=false
          fi
          echo "VERSION_CHANGED=$VERSION_CHANGED" >> $GITHUB_ENV

      - name: Act based on version change
        run: |
          if [ "$VERSION_CHANGED" = "true" ]; then
            echo "Proceed with actions for version change."
            # Add additional steps for version change (e.g., build, deployment)
          else
            echo "No version change detected. Skipping version-related steps."
          fi
